<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Financiamento</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body style="margin:0; background-color: #1c2541; display: flex; justify-content: center; align-items: center; min-height: 100vh;">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function CalculadoraFinanciamento() {
            const [valor, setValor] = useState("");
            const [taxa, setTaxa] = useState("");
            const [meses, setMeses] = useState("");
            const [prestacao, setPrestacao] = useState(null);

            const calcular = () => {
                const pv = parseFloat(valor); // Valor presente
                const i = parseFloat(taxa) / 100; // Taxa mensal
                const n = parseInt(meses); // Período em meses

                if (!pv || !i || !n) return;

                // Fórmula da Tabela Price: PMT = PV * [(i * (1 + i)^n) / ((1 + i)^n - 1)]
                const pmt = pv * ( (i * Math.pow(1 + i, n)) / (Math.pow(1 + i, n) - 1) );
                
                setPrestacao(pmt.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }));
            };

            const abrirWhats = () => {
                window.open("https://wa.me/5531986933166", "_blank");
            };

            const estilos = {
                container: {
                    fontFamily: "Arial, sans-serif",
                    maxWidth: "420px",
                    width: "90%",
                    padding: "25px",
                    borderRadius: "16px",
                    background: "#0B132B",
                    color: "white",
                    boxShadow: "0 10px 25px rgba(0,0,0,.4)",
                    textAlign: "center",
                },
                input: {
                    width: "100%",
                    padding: "12px",
                    margin: "10px 0",
                    borderRadius: "8px",
                    border: "none",
                    fontSize: "16px",
                    boxSizing: "border-box",
                    backgroundColor: "white"
                },
                label: {
                    display: "block",
                    textAlign: "left",
                    fontSize: "14px",
                    marginBottom: "-5px",
                    marginTop: "10px",
                    color: "#6FFFE9"
                },
                btn: {
                    width: "100%",
                    padding: "14px",
                    marginTop: "15px",
                    borderRadius: "10px",
                    border: "none",
                    fontSize: "16px",
                    fontWeight: "bold",
                    background: "#6FFFE9",
                    color: "#0B132B",
                    cursor: "pointer",
                    transition: "0.3s"
                },
                whats: {
                    marginTop: "12px",
                    background: "#25D366",
                    color: "white",
                },
                box: {
                    marginTop: "20px",
                    padding: "15px",
                    borderRadius: "10px",
                    background: "rgba(255,255,255,0.1)",
                    border: "1px solid #6FFFE9"
                }
            };

            return (
                <div style={estilos.container}>
                    <h2 style={{marginBottom: '20px'}}>Calculadora de Financiamento</h2>
                    
                    <span style={estilos.label}>Valor do Veículo (R$)</span>
                    <input style={estilos.input} type="number" placeholder="Ex: 10000" value={valor} onChange={e => setValor(e.target.value)} />
                    
                    <span style={estilos.label}>Taxa de Juros (% ao mês)</span>
                    <input style={estilos.input} type="number" step="0.01" placeholder="Ex: 1.99" value={taxa} onChange={e => setTaxa(e.target.value)} />
                    
                    <span style={estilos.label}>Prazo (Meses)</span>
                    <input style={estilos.input} type="number" placeholder="Ex: 48" value={meses} onChange={e => setMeses(e.target.value)} />
                    
                    <button style={estilos.btn} onClick={calcular}>Calcular Prestação</button>
                    
                    {prestacao && (
                        <div style={estilos.box}>
                            <span style={{fontSize: '14px'}}>Prestação Mensal:</span><br />
                            <strong style={{fontSize: '24px', color: '#6FFFE9'}}>R$ {prestacao}</strong>
                        </div>
                    )}
                    
                    <button style={{...estilos.btn, ...estilos.whats}} onClick={abrirWhats}>Falar no WhatsApp</button>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<CalculadoraFinanciamento />);
    </script>
</body>
</html>
